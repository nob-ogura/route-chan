# 01. リポジトリ初期化とツール — 受入基準達成タスク

ゴール: `frontend` と `server` がローカルで起動可能（フロントはダミー画面、バックエンドは `/api/health` のみ）であること。

## 前提
- Node.js 22.x / npm が利用可能
- Python 3.11 / pip が利用可能

## 作業タスク

### 1) リポ構成と共通設定
- [ ] ルート直下に `frontend/` と `server/` ディレクトリを用意する（存在する場合は流用）。
- [ ] `.gitignore` を追加し、以下を含める（例）：

  ```gitignore
  # macOS
  .DS_Store
  
  # Node
  node_modules/
  dist/
  .env
  
  # Python
  server/.venv/
  __pycache__/
  *.pyc
  
  # Logs
  *.log
  ```

- [ ] `.editorconfig` を追加（例）：

  ```ini
  root = true

  [*]
  charset = utf-8
  end_of_line = lf
  insert_final_newline = true
  indent_style = space
  indent_size = 2
  trim_trailing_whitespace = true

  [*.py]
  indent_size = 4
  ```

### 2) バックエンド最小起動（Flask）
- [ ] `server/requirements.txt` を作成し、依存を追加：

  ```txt
flask
flask-cors
flask-limiter
pydantic
requests
ortools
  ```

- [ ] `server/app.py` に最小構成の Flask アプリを作成：

  ```python
  from flask import Flask, jsonify

  app = Flask(__name__)

  @app.get("/api/health")
  def health():
      return jsonify(status="ok"), 200

  if __name__ == "__main__":
      app.run(host="0.0.0.0", port=5000)
  ```

- [ ] 仮想環境を作成して依存をインストール：

  ```bash
  cd server
  # 推奨: Python 3.11 で仮想環境を作成
  python3.11 -m venv .venv && source .venv/bin/activate
  pip install -r requirements.txt
  ```

- [ ] バックエンドを起動し、Health を確認：

  ```bash
  # 起動
  python app.py

  # 動作確認（別ターミナル）
  curl -i http://localhost:5000/api/health
  # 200 と {"status":"ok"} が返ること
  ```

### 3) フロントエンド最小起動（Vite + React + TS）
- [ ] Vite で React/TS プロジェクトを `frontend/` に初期化（既存ならスキップ）：

  ```bash
  # 対話に従いテンプレート: react-ts を選択
  npm create vite@latest frontend -- --template react-ts
  cd frontend
  npm i
  ```

- [ ] 依存を追加（計画に沿って Leaflet まで入れておく）：

  ```bash
  npm i leaflet
  ```

- [ ] ダミー画面を表示するよう `src/App.tsx` を編集（例）：

  ```tsx
  export default function App() {
    return (
      <main style={{ padding: 24 }}>
        <h1>Route-chan</h1>
        <p>Dummy screen is running.</p>
      </main>
    );
  }
  ```

- [ ] フロントエンドを起動し、表示を確認：

  ```bash
  npm run dev
  # http://localhost:5173 にアクセスしてダミー文言が見えること
  ```

- [ ] Lint/Format ツール（Biome）を導入：

  ```bash
  npm i -D @biomejs/biome
  ```

  `frontend/biome.json`（例）：

  ```json
  {
    "$schema": "https://biomejs.dev/schemas/1.5.3/schema.json",
    "linter": { "enabled": true },
    "formatter": { "enabled": true }
  }
  ```

  `frontend/package.json` にスクリプト（例）：

  ```json
  {
    "scripts": {
      "dev": "vite",
      "build": "vite build",
      "preview": "vite preview",
      "lint": "biome check .",
      "format": "biome format --write ."
    }
  }
  ```

## 受入基準チェック
- [ ] バックエンド: `GET http://localhost:5000/api/health` が 200 と `{ "status": "ok" }` を返す。
- [ ] フロントエンド: `npm run dev` で起動し、ダミー画面がブラウザに表示される。

以上で、Plan の「1. リポジトリ初期化とツール」の受入基準を満たす最小タスクを完了できる。
